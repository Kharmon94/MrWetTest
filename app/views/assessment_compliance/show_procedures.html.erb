<div class="container py-5">
  <div class="row">
    <div class="col-lg-10 mx-auto">
      <!-- Page Header -->
      <div class="d-flex flex-column flex-sm-row justify-content-between align-items-start align-items-sm-center mb-4">
        <h1 class="text-gradient h2 mb-3 mb-sm-0">Assessment Procedures</h1>
        <%= link_to "â† Back to Test", course_test_path(@test.course, @test), class: "btn btn-outline-secondary" %>
      </div>

      <!-- Compliance Errors -->
      <% if @compliance_errors.any? %>
        <div class="alert alert-danger mb-4">
          <h5 class="alert-heading">
            <i class="fas fa-exclamation-triangle me-2"></i>Cannot Proceed
          </h5>
          <ul class="mb-0">
            <% @compliance_errors.each do |error| %>
              <li><%= error %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <!-- Assessment Information -->
      <div class="card mb-4" style="background: var(--bg-secondary); border: 1px solid var(--border-primary);">
        <div class="card-header" style="background: var(--bg-tertiary); border-bottom: 1px solid var(--border-primary);">
          <h5 class="mb-0" style="color: var(--text-primary);">
            <i class="fas fa-info-circle me-2"></i>Assessment Information
          </h5>
        </div>
        <div class="card-body p-4" style="color: var(--text-primary);">
          <div class="row g-3">
            <% @instructions.each do |instruction| %>
              <div class="col-12">
                <div class="d-flex align-items-center">
                  <i class="fas fa-check-circle text-success me-3"></i>
                  <span><%= instruction %></span>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>

      <!-- Assessment Procedures -->
      <div class="card mb-4" style="background: var(--bg-secondary); border: 1px solid var(--border-primary);">
        <div class="card-header" style="background: var(--bg-tertiary); border-bottom: 1px solid var(--border-primary);">
          <h5 class="mb-0" style="color: var(--text-primary);">
            <i class="fas fa-clipboard-list me-2"></i>Assessment Procedures
          </h5>
        </div>
        <div class="card-body p-4" style="color: var(--text-primary);">
          <div class="procedures-text" style="white-space: pre-line; line-height: 1.6;">
            <%= @procedures_text %>
          </div>
          <hr class="my-4" />
          <p class="mb-0">
            For details on how your personal information and assessment data are protected when using this online system,
            please review our
            <%= link_to "Internet Security & Privacy Policies", 
                        security_policies_test_path(@test), 
                        class: "link-primary" %>.
          </p>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="d-flex flex-column flex-sm-row gap-3 justify-content-center">
        <% if @compliance_errors.empty? %>
          <%= link_to "I Understand - Continue to Honor Statement", 
                      honor_statement_test_path(@test), 
                      class: "btn btn-primary btn-lg px-4 px-md-5" %>
        <% else %>
          <button class="btn btn-secondary btn-lg px-4 px-md-5" disabled>
            Cannot Proceed - See Errors Above
          </button>
        <% end %>
        <%= link_to "Cancel", course_test_path(@test.course, @test), class: "btn btn-outline-secondary btn-lg px-4 px-md-5" %>
      </div>
    </div>
  </div>
</div>
